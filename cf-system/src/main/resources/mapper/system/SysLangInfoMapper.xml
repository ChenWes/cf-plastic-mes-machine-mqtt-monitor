<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cf.system.mapper.SysLangInfoMapper">

	<resultMap type="SysLangInfo" id="SysLangInfoResult">
		<id     property="langInfoId"             column="lang_info_id"               />
		<result property="tableName"           column="table_name"             />
		<result property="columnName"            column="column_name"             />
		<result property="recordId"            column="record_id"             />
		<result property="lang"             column="lang"                />
		<result property="value"             column="value"                />
		<result property="createBy"           column="create_by"             />
		<result property="createTime"         column="create_time"           />
		<result property="updateBy"           column="update_by"             />
		<result property="updateTime"         column="update_time"           />
	</resultMap>

	<sql id="getLangInfoSql">
		SELECT `sys_lang_info`.`lang_info_id`,
		`sys_lang_info`.`table_name`,
		`sys_lang_info`.`column_name`,
		`sys_lang_info`.`record_id`,
		`sys_lang_info`.`lang`,
		`sys_lang_info`.`value`,
		`sys_lang_info`.`create_by`,
		`sys_lang_info`.`create_time`,
		`sys_lang_info`.`update_by`,
		`sys_lang_info`.`update_time`
		FROM `sys_lang_info`

    </sql>

    <select id="getLangInfoList" parameterType="SysLangInfo" resultMap="SysLangInfoResult">
		<include refid="getLangInfoSql"/>
		<where>
			<if test="tableName != null and tableName != ''">
				AND table_name = #{tableName}
			</if>
			<if test="columnName != null and columnName != ''">
				AND column_name = #{columnName}
			</if>
			<if test="lang != null and lang != ''">
				AND lang = #{lang}
			</if>

			<if test="recordId != null and recordId !=0">
				AND record_id = #{recordId}
			</if>
		</where>

	</select>

	<select id="getLangInfoById" parameterType="Long" resultMap="SysLangInfoResult">
		<include refid="getLangInfoSql"/>
		where lang_info_id=#{langInfoId}
	</select>

	<select id="getLangInfoCount" resultType="Long">
		SELECT COUNT(lang_info_id)	FROM sys_lang_info
		<where>
			<if test="tableName != null and tableName != ''">
				AND table_name = #{tableName}
			</if>
			<if test="columnName != null and columnName != ''">
				AND column_name = #{columnName}
			</if>
			<if test="lang != null and lang != ''">
				AND lang = #{lang}
			</if>
		</where>
	</select>

 	<insert id="insertLangInfo" parameterType="SysLangInfo" useGeneratedKeys="true" keyProperty="langInfoId">
 		insert into sys_lang_info(
 			<if test="langInfoId != null and langInfoId != 0">lang_info_id,</if>
		    <if test="tableName != null and tableName != ''">table_name,</if>
 			<if test="columnName != null and columnName != ''">column_name,</if>
			<if test="recordId != null and recordId != 0">record_id,</if>
 			<if test="lang != null and lang != ''">lang,</if>
			<if test="value != null and value != ''">value,</if>
 			<if test="createBy != null and createBy != ''">create_by,</if>
            <if test="createTime != null">create_time</if>
 		)values(
 			<if test="langInfoId != null and langInfoId != 0">#{langInfoId},</if>
		    <if test="tableName != null and tableName != ''">#{tableName},</if>
 			<if test="columnName != null and columnName != ''">#{columnName},</if>
			<if test="recordId != null and recordId != 0">#{recordId},</if>
 			<if test="lang != null and lang != ''">#{lang},</if>
			<if test="value != null and value != ''">#{value},</if>
 			<if test="createBy != null and createBy != ''">#{createBy},</if>
            <if test="createTime != null">#{createTime}</if>
 		)
	</insert>

	<update id="updateLangInfo" parameterType="SysLangInfo">
 		update sys_lang_info
 		<set>
			<if test="tableName != null and tableName!=null ">table_name = #{tableName},</if>
			<if test="columnName != null and columnName!=null ">column_name = #{columnName},</if>
			<if test="recordId != null and recordId!=0 ">record_id = #{recordId},</if>
 			<if test="lang != null and lang != ''">lang = #{lang},</if>
 			<if test="value != null and value != ''">value = #{value},</if>
 			<if test="updateBy != null and updateBy != ''">update_by = #{updateBy},</if>
            <if test="updateTime != null">update_time = #{updateTime}</if>
 		</set>
 		where lang_info_id = #{langInfoId}
	</update>

    <update id="updateLangInfoByTableNameAndColumnNameAndRecordId" parameterType="SysLangInfo">
        update sys_lang_info
        <set>
            <if test="value != null and value != ''">value = #{value},</if>
            <if test="updateBy != null and updateBy != ''">update_by = #{updateBy},</if>
            <if test="updateTime != null">update_time = #{updateTime}</if>
        </set>
        where table_name = #{tableName}  and column_name = #{columnName} and record_id = #{recordId} and lang = #{lang}
    </update>


	<delete id="deleteLangInfoById" parameterType="Long">
 		delete from sys_lang_info where lang_info_id = #{langInfoId}
 	</delete>

 	<delete id="deleteLangInfoByIds" parameterType="Long">
		delete from sys_lang_info  where  lang_info_id in
 		<foreach collection="array" item="langInfoId" open="(" separator="," close=")">
 			#{langInfoId}
        </foreach>
 	</delete>

    <delete id="deleteLangInfoByRecordIdsAndTableName">
        delete from sys_lang_info where table_name = #{tableName} and record_id in
        <foreach collection="recordIds" item="langInfoId" open="(" separator="," close=")">
            #{langInfoId}
        </foreach>
    </delete>

	<select id="getPagingLangInfoList" resultMap="SysLangInfoResult">
		<include refid="getLangInfoSql"/>
		<where>
			<if test="tableName != null and tableName != ''">
				AND table_name = #{tableName}
			</if>
			<if test="columnName != null and columnName != ''">
				AND column_name = #{columnName}
			</if>
			<if test="lang != null and lang != ''">
				AND lang = #{lang}
			</if>
			<if test="lastId != null">
				AND lang_info_id  <![CDATA[<]]> #{lastId}
			</if>
		</where>
		ORDER BY lang_info_id DESC
		LIMIT #{pageSize}
	</select>
</mapper>